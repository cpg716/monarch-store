# Do NOT set target-dir here: npm run tauri dev sets CARGO_TARGET_DIR to src-tauri/target so the
# pre-step (cargo build -p monarch-helper) and the app use the same dir. If we set target-dir = "../target",
# the pre-step would build the helper to project_root/target/ while the app looks in src-tauri/target/
# and can run an old helper (e.g. without AlpmInstall).
[target.x86_64-unknown-linux-gnu]
# Use mold (fastest linker) for up to 7x faster linking during development
# Requires: sudo pacman -S mold clang
# Fallback: If you encounter symbol errors, switch to lld or gcc
# linker = "clang"
# rustflags = [
#   "-C", "link-arg=-fuse-ld=/usr/bin/mold",
#   "-C", "link-arg=-Wl,-z,relro,-z,now",   # Full RELRO
#   "-C", "link-arg=-Wl,-z,noexecstack",    # No executable stack
# ]

# Alternative: Use lld (more stable, still fast)
# linker = "clang"
# rustflags = ["-C", "link-arg=-fuse-ld=lld"]

# Fallback: Use gcc (slowest, but most compatible)
# linker = "gcc"

[target.aarch64-unknown-linux-gnu]
linker = "aarch64-linux-gnu-gcc"
